<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Dimensions of Elements.md @ 2011-9-26</title>
	<link rel="stylesheet" href="../lib/prism/prism.css"/>
	<link rel="stylesheet" href="../themes/darcula/index.css"/>
</head>
<body>
	<p>**在使用JavaScript脚本获取 <code>元素的尺寸</code> 时，有几个属性你需要弄清楚，不然会很棘手。以往我都是对这些属性死记硬背，忘记了就查手册。看完本文我相信这种情况就不会再发生了.</p>
<h2 id="-">元素占据的物理空间的尺寸</h2>
<p>如果你需要获得元素占据的物理空间，那么使用 <code>ffsetHeight</code> 和 <code>offsetWidth</code> 。
自然而然此物理空间必然包含的有：<code>padding</code> 、<code>滚动条</code> 、<code>border</code>。这两个属性与 <code>getBoundingClientRect()</code>的height和width属性是一致的。</p>
<p>为了帮助理解请看下图：</p>
<p><img src="https://developer.mozilla.org/@api/deki/files/186/=Dimensions-offset.png" alt="Alt text"></p>
<h2 id="-">元素内部内容的可视区域的尺寸</h2>
<p>可视区域包含padding，但是不包含border、滚动条。此时请使用 <code>clientHeight</code> 和 <code>clientWidth</code> 。</p>
<p>为了帮助理解请看下图：</p>
<p><img src="https://developer.mozilla.org/@api/deki/files/185/=Dimensions-client.png" alt="Alt text"></p>
<h2 id="-">元素内部内容的全部尺寸</h2>
<p>如果你要获取元素内容的真正大小，当然也包含那些不可见的内容，此时你需要使用 <code>scrollHeight</code> / <code>scrollWidth</code> 。</p>
<p>例如一张600<em>400的图片被包含在一个300</em>300的可滚动的容器元素内，那么scrollWidth将返回600，而scrollHeight将返回400</p>
<h2 id="-">获取元素的真实尺寸</h2>
<p>大部分场景，我们并不关心元素的全部内容的尺寸（window/document/body元素除外），最常用的恐怕还是获取元素占据的物理空间(offsetHeight/offsetWidth)。</p>
<p>比如对某段文字设置自定义的tooltip，这个时候需要获取目标元素的高度然后对tooltip进行定位。</p>
<p>不论是clientHeight还是offsetHeight它们都包含了padding，假设这段文字包含了100px的padding，这个tooltip的位置显然会极其的不准确。</p>
<p>因此获取元素的高度通常是需要去掉padding。</p>
<p>由于元素的style属性只能获取到内联样式的width/height，所以在IE中需要使用 <code>el.currentStyle.height/width</code>，
而标准浏览器中使用 <code>window.getComputedStyle(el,null).width/height</code>。
下面是我整理的园友Snandy的一个用户获取元素真实高度和宽度的方法 :</p>
<pre><code>function getStyle(el) {
    if(window.getComputedStyle) {
        return window.getComputedStyle(el, null);
    }else{
        return el.currentStyle;
    }
}
function getWH(el, name) {
    var val = name === &quot;width&quot; ? el.offsetWidth : el.offsetHeight,
        which = name === &quot;width&quot; ? [&#39;Left&#39;, &#39;Right&#39;] : [&#39;Top&#39;, &#39;Bottom&#39;];
    // display is none
    if(val === 0) {
        return 0;
    }
    var style = getStyle(el);
    for(var i = 0, a; a = which[i++];) {
        val -= parseFloat( style[&quot;border&quot; + a + &quot;Width&quot;]) || 0;
        val -= parseFloat( style[&quot;padding&quot; + a ] ) || 0;
    }
    return val;
 } 
</code></pre><hr>
<h2 id="jquery-">jQuery与元素尺寸相关的方法</h2>
<h3 id="jquery-height-jquery-width-">jQuery.height()/jQuery.width()</h3>
<p>返回一个整数，为匹配的jQuery对象集合中第一个元素的高度值。
注意此结果不关心盒式模型，不包含元素的padding。此方法等价于getWH(el,&#39;height/width&#39;)
这个方法同样能计算出window和document的高度。</p>
<h3 id="jquery-innerheight-jquery-innerwidth-">jQuery.innerHeight()/jQuery.innerWidth()</h3>
<p>对比jQuery.height() /jQuery.width() 此结果包含padding，但是不包含border。
当元素el未设置border时，此方法等价于el.offsetHeight/offsetWidth</p>
<h3 id="jquery-outerheight-jquery-outerwidth-">jQuery.outerHeight()/jQuery.outerWidth()</h3>
<p>对比jQuery.height() /jQuery.width() 此结果包含padding和border，默认不包含margin。
当元素未指定margin时，此方法等价于el.offsetHeight/offsetWidth
可以传入一个bool变量来指定是否包含margin。</p>
<p>注意：
由于获取普通元素的全部内容的尺寸意义不大（某些元素除外如window、document、iframe等），
所以jQuery的这三个方法都未包含不可见区域。</p>
<hr>
<h3 id="-">参考阅读</h3>
<ul>
<li><a href="http://www.cnblogs.com/snandy/archive/2011/09/06/2167440.html">各情景下元素宽高的获取 by Snandy</a></li>
<li><a href="https://developer.mozilla.org/en/Determining_the_dimensions_of_elements">Determining the dimensions of elements</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/ms530302(VS.85">Measuring Element Dimension and Location with CSSOM in Internet Explorer 9</a>.aspx)</li>
</ul>

	<script src="../lib/prism/prism.js"></script>
</body>
</html>